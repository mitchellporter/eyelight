$(function(){function e(e){var s=e.find("input[type='email']").val();return s&&s.length?-1===s.indexOf("@")?!1:!0:!1}function s(e){$.ajax({type:"GET",url:e.attr("action"),data:e.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",success:function(s){var n=s.msg||"Sorry, unable to subscribe. Please try again later.";"success"!==s.result?s.msg&&s.msg.indexOf("already subscribed")>=0&&(n="Looks like you've already subscribed. Thanks!",$("#errorMessage").remove(),$("#errors").append("<p id='errorMessage'>"+n+"</p>")):(e[0].reset(),a.fadeIn(),o.hide())}})}var n=$("#mc-embedded-subscribe-form"),o=$(".mc-field-group input, .clear input"),a=$("#signup-success"),t=$(".overlay"),i=$(".modal"),r=$(".modal .container"),l=$("#app-intro .container"),c=!1,d="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(c=!0,l.addClass("mobile")),$("#toTop").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html,body").animate({scrollTop:e.offset().top},1e3),!1}}),$("#eyelight-logo, #eyelight-text").click(function(){$("#blink").addClass("blink").one(d,function(){$(this).removeClass("blink")})}),$("#mobileContent img.bounceInUp").on(d,function(){$(this).addClass("flip")}),$(window).scroll(function(){var e=$(this).scrollTop(),s=$("#hero").height(),n=$("#hero .content"),o=$("#hero #blur"),a=$(window).width(),t=250;if(c===!1&&s>=e){var i=$(this).scrollTop()/550,r=n.offset().top,d=1-(e-r+t)/t;i>"1"&&(i=1),a>652?(o.css({opacity:i}),n.css({opacity:d})):n.css({opacity:"1"}),e>=$(window).height()/8&&l.css({transform:"translate(0px, -"+e/4+"%)",opacity:e/400}),a>=815&&n.css({transform:"translate(0px, "+e/3.5+"%)"}),815>a&&n.css({transform:"translate(0px, "+e/4.5+"%)"}),668>a&&(n.css({transform:"translate(0px, "+e/5.4+"%)"}),l.css({transform:"translate(0px, -"+e/5+"%)",opacity:e/400}))}c===!0&&(l.addClass("fadeMe"),e>l.offset().top-$(window).height()/1.25&&l.addClass("fadeMe").css({opacity:"1",transition:"all 750ms ease-in-out"})),e>$(".platform").offset().top-$(window).height()/1.25&&($("#phone").addClass("shadow-pulse"),$("#watch").addClass("shadow-pulse-delay"))}),$(".cta").on("click",function(){t.addClass("is-open"),i.addClass("bounceInDown").one(d,function(){$(this).removeClass("bounceInDown")}),r.addClass("bounceInDown2").one(d,function(){$(this).removeClass("bounceInDown2")})}),$(".close-btn").on("click",function(){t.removeClass("is-open"),a.fadeOut("slow"),o.fadeIn("slow"),$("#errorMessage").remove(),$("input[type='email']").css("border","none"),i.addClass("slideOutUp").one(d,function(){$(this).removeClass("slideOutUp")}),r.addClass("slideOutUp2").one(d,function(){$(this).removeClass("slideOutUp2")})}),n.submit(function(o){o.preventDefault(),e(n)?s(n):($("#errorMessage").remove(),$("#errors").append("<p id='errorMessage'>A valid email is required.</p>"),$("input[type='email']").css({border:"2px solid red","border-radius":"5px"}))})});